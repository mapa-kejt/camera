<!DOCTYPE html>
<html>
  <head>
    <title>QR Scanner Example</title>
    <script src="https://cdn.rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
    <style>
      .button-container {
        text-align: center;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <div class="button-container">
      <button id="startScanButton">ajde Scan</button>
    </div>
    <video id="scanner" style="height: 80vh"></video>
    <script>
      // Initialize the QR scanner
      const scanner = new Instascan.Scanner({
        video: document.getElementById("scanner"),
        mirror: false,
      });

      // Function to start scanning
      function startScan() {
        Instascan.Camera.getCameras()
          .then(function (cameras) {
            if (cameras.length > 0) {
              // Use the back camera
              const selectedCamera = cameras.find(function (camera) {
                return camera.name.toLowerCase().includes("back");
              });

              if (selectedCamera) {
                scanner.start(selectedCamera);
              } else {
                scanner.start(cameras[0]);
              }

              document.getElementById("startScanButton").style.display = "none";
            } else {
              console.error("No cameras found.");
            }
          })
          .catch(function (error) {
            console.error(error);
          });

        scanner.addListener("scan", function (content) {
          alert("Scanned content: " + content);
        });
      }

      // Add click event listener to the start scan button
      document
        .getElementById("startScanButton")
        .addEventListener("click", startScan);
    </script>
  </body>
</html>
